<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Dependency injection in Play and Akka with Scaldi</title>

  <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
  <meta name="author" content="Hakim El Hattab">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/default.css" id="theme">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <link href="http://fonts.googleapis.com/css?family=Oxygen+Mono" rel="stylesheet" type="text/css">

  <!-- If the query includes 'print-pdf', include the PDF print sheet -->
  <script>
    if( window.location.search.match( /print-pdf/gi ) ) {
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = 'css/print/pdf.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
  </script>

  <script src="my/coffee-script.js"></script>
  <script src="my/slides.coffee" type="text/coffeescript"></script>

  <link rel="stylesheet/less" type="text/css" href="my/slides.less" />
  <script src="my/less-1.7.0.min.js"></script>

  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
</head>

<body>
  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
      <section data-background="#F7A541">
        <h1>Scal<span class="di">di</span></h1>
        <h3>Lightweight Dependency Injection Library</h3>
        <p>
          <small><span class="bg-text">Created by</span>&nbsp;&nbsp;Oleg Ilyenko&nbsp;&nbsp;<a target="_blank" href="http://twitter.com/easyangel">@easyangel</a></small>
        </p>
      </section>

      <section data-background="#FEE5AD" data-transition="linear">
        <h2>Only <strong>3</strong> Concepts</h2>
      </section>

      <section data-background="#FEE5AD">
        <h2>Injector</h2>
        A container for the bindings
      </section>

      <section data-background="#FEE5AD" data-markdown>
        <script type="text/template">
          ## Module

          * A place where you define the bindings
          * DSL for bindings
          * extends **Injector**
        </script>
      </section>

      <section data-background="#FEE5AD">
        <h2>Injectable</h2>

        DSL for injection

        <pre><code data-trim contenteditable class="scala">
inject [SomeClass]
        </code></pre>

        <span class="fragment fade-in" data-fragment-index="1">
          ... or this one ...
        </span>

        <pre class="fragment roll-in" data-fragment-index="1"><code data-trim contenteditable class="scala">
inject [Database] (identified by 'remote and by default new Riak)
        </code></pre>
      </section>

      <section data-background="#FEE5AD">
        <h2>Injector&nbsp;&nbsp;and&nbsp;&nbsp;Injectable</h2>

        <pre><code data-trim contenteditable class="scala">
class OfficialMessageService(implicit inj: Injector)
          extends MessageService with Injectable {

  val officialGreeting =
    inject [String] (identified by "greeting.official")

  def getGreetMessage(name: String) =
    s"$officialGreeting, $name!"
}
        </code></pre>

        <span class="fragment fade-in" data-fragment-index="1">
          and <strong>Module</strong> of course
        </span>

        <pre class="fragment roll-in" data-fragment-index="1"><code data-trim contenteditable class="scala">
class UserModule extends Module {
  bind [MessageService] to new OfficialMessageService

  binding identifiedBy "greeting.official" to "Welcome"
}
        </code></pre>
      </section>

      <section data-background="#F7A541" data-transition="linear">
        <h2>&#9733; Something Special &#9733;</h2>
      </section>

      <section data-background="#F7A541">
        <h2>Injector Composition</h2>

        <pre><code data-trim contenteditable class="scala">
def tokenModule = new Module {
  bind [Tokens] to new TokenRepo(db = inject [Database])
}

def dbModule = new Module {
  bind [Database] to new Riak
}

def appModule = tokenModule :: dbModule
        </code></pre>

        <span class="fragment fade-in" data-fragment-index="1">
          and then test it
        </span>

        <pre class="fragment roll-in" data-fragment-index="1"><code data-trim contenteditable class="scala">
def mocksModule = new Module {
  bind [Database] to new InMemoryDb
}

implicit val testModule = mocksModule :: appModule
        </code></pre>
      </section>

      <section data-background="#F7A541">
        <h2>Injector Types</h2>

        <ul>
          <li>Mutable Injectors</li>
          <li>Immutable Injectors</li>
          <li>Properties Injector</li>
          <li>Play Configuration Injector</li>
          <li class="fragment" data-fragment-index="1">
            Create you own<span class="fragment" data-fragment-index="2" style="color: #0c8814">, it's easy</span>
          </li>
        </ul>

        <pre class="fragment roll-in" data-fragment-index="2"><code data-trim contenteditable class="scala">
trait Injector {
  def getBinding(identifiers: List[Identifier]): Option[Binding]
  def getBindings(identifiers: List[Identifier]): List[Binding]

  // ...
}
        </code></pre>

        <aside class="notes">
          Tell about <a href="https://github.com/scaldi/scaldi/issues/14" target="_blank">Play controller injector</a>.
        </aside>
      </section>

      <section data-background="#F7A541">
        <h2>Generics</h2>

        <span>
          bind
        </span>

        <pre><code data-trim contenteditable class="scala">
binding identifiedBy "intAdder" to
  ((a: Int, b: Int) => a + b)

binding identifiedBy "mapping" to Map(
  "scala" -> "http://scala-lang.org",
  "play" -> "http://www.playframework.com",
  "akka" -> "http://akka.io"
)
        </code></pre>

        <span class="fragment fade-in" data-fragment-index="1">
          inject
        </span>

        <pre class="fragment roll-in" data-fragment-index="1"><code data-trim contenteditable class="scala">
val intAdder = inject [(Int, Int) => Int]

val mapping = inject [Map[String, String]]
        </code></pre>
      </section>

      <section data-background="#F7A541">
        <h2>Conditions</h2>

        <pre><code data-trim contenteditable class="scala">
class UserModule extends Module {
  bind [MessageService] when (inDevMode or inTestMode) to
    new SimpleMessageService

  bind [MessageService] when inProdMode to
    new OfficialMessageService
}
        </code></pre>

        <pre class="fragment roll-in"><code data-trim contenteditable class="scala">
def inDevMode(implicit inj: Injector) = {
  val mode = inject [Mode]
  Condition(mode == Dev)
}
        </code></pre>
      </section>

      <section data-background="#9BC585" data-transition="linear">
        <a href="http://www.playframework.com/">
          <img src="my/img/play.svg" class="logo">
        </a>
      </section>

      <section data-background="#78B8BC" data-transition="linear">
        <a href="http://akka.io/">
          <img src="my/img/akka.png" class="logo">
        </a>
      </section>

      <section data-background="#78B8BC">
        <a href="https://twitter.com/rolandkuhn/status/445832745554423809">
          <img src="my/img/tweet.png" class="tweet">
        </a>
      </section>

      <section data-background="#FEE5AD" data-markdown data-transition="linear">
        <script type="text/template">
          ## More Information

          * Home page: http://scaldi.org
          * GitHub: https://github.com/scaldi
          * Blog: http://hacking-scala.org/
          * StackOverflow: tag [scaldi](http://stackoverflow.com/questions/ask?tags=scala,scaldi)
          * Typesafe activator templates
            * [Scaldi Play Example](https://typesafe.com/activator/template/scaldi-play-example)
            * [Scaldi Akka Example](https://typesafe.com/activator/template/scaldi-akka-example)
          * This presentation: <br>
            http://scaldi.github.io/scaldi-presentation

        </script>
      </section>

      <section data-background="#F7A541">
        <h1 class="fragment fade-out" data-fragment-index="1">EOF</h1>
        <h1 class="fragment roll-in" data-fragment-index="1">Thank you!</h1>
        <h2 class="fragment roll-in" data-fragment-index="2">Questions?</h2>
      </section>

    </div>
  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      theme: 'sky',//Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

      // Parallax scrolling
      // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
      // parallaxBackgroundSize: '2100px 900px',

      // Optional libraries used to extend on reveal.js
      dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
    });

  </script>

</body>
</html>
